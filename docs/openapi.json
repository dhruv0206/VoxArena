{"openapi":"3.1.0","info":{"title":"VoxArena API","description":"Backend API for VoxArena Voice Agent Platform","version":"0.1.0"},"servers":[{"url":"http://localhost:8000","description":"Local development"}],"paths":{"/api/agents/":{"get":{"tags":["Agents"],"summary":"Get Agents","description":"Get all agents for the authenticated user.","operationId":"get_agents_api_agents__get","parameters":[{"name":"x-user-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentResponse"},"title":"Response Get Agents Api Agents  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Agents"],"summary":"Create Agent","description":"Create a new agent.","operationId":"create_agent_api_agents__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/agents/{agent_id}":{"get":{"tags":["Agents"],"summary":"Get Agent","description":"Get a single agent by ID.","operationId":"get_agent_api_agents__agent_id__get","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Agents"],"summary":"Update Agent","description":"Update an agent.","operationId":"update_agent_api_agents__agent_id__patch","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Agents"],"summary":"Delete Agent","description":"Soft delete an agent (sets is_active to False).","operationId":"delete_agent_api_agents__agent_id__delete","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/":{"get":{"tags":["Sessions"],"summary":"Get Sessions","description":"Get all sessions for the authenticated user with pagination and date filtering.","operationId":"get_sessions_api_sessions__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10000,"minimum":1,"default":10,"title":"Limit"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Date"}},{"name":"x-user-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Sessions"],"summary":"Create Session","description":"Create a new voice session.\n\nuser_id can be either:\n- A Clerk ID (browser sessions): looked up or created via get_or_create_user\n- An internal DB user UUID (SIP sessions): looked up directly by primary key","operationId":"create_session_api_sessions__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/{session_id}":{"get":{"tags":["Sessions"],"summary":"Get Session","description":"Get a single session by ID.","operationId":"get_session_api_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Sessions"],"summary":"Update Session","description":"Update a session.","operationId":"update_session_api_sessions__session_id__patch","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/{session_id}/transcripts":{"get":{"tags":["Sessions"],"summary":"Get Session Transcripts","description":"Get all transcripts for a session.","operationId":"get_session_transcripts_api_sessions__session_id__transcripts_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TranscriptResponse"},"title":"Response Get Session Transcripts Api Sessions  Session Id  Transcripts Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Sessions"],"summary":"Add Transcript","description":"Add a transcript to a session.","operationId":"add_transcript_api_sessions__session_id__transcripts_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/{session_id}/analysis":{"get":{"tags":["Sessions"],"summary":"Get Session Analysis","description":"Get call analysis for a session.","operationId":"get_session_analysis_api_sessions__session_id__analysis_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/{session_id}/cost-breakdown":{"get":{"tags":["Sessions"],"summary":"Get Session Cost Breakdown","description":"Get cost breakdown for a session.","operationId":"get_session_cost_breakdown_api_sessions__session_id__cost_breakdown_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionCostBreakdownResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/{session_id}/transfer":{"post":{"tags":["Sessions"],"summary":"Transfer Call","description":"Transfer an active call to another phone number.\n\nCold transfer: caller connected to new number, agent disconnected.\nWarm transfer: three-way call (caller + agent + target), agent drops when ready.","operationId":"transfer_call_api_sessions__session_id__transfer_post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/by-room/{room_name}":{"get":{"tags":["Sessions"],"summary":"Get Session By Room","description":"Get a session by room name.","operationId":"get_session_by_room_api_sessions_by_room__room_name__get","parameters":[{"name":"room_name","in":"path","required":true,"schema":{"type":"string","title":"Room Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/by-room/{room_name}/end":{"post":{"tags":["Sessions"],"summary":"End Session By Room","description":"End a session by room name and calculate duration.","operationId":"end_session_by_room_api_sessions_by_room__room_name__end_post","parameters":[{"name":"room_name","in":"path","required":true,"schema":{"type":"string","title":"Room Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoiceSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/sessions/by-room/{room_name}/transcripts":{"post":{"tags":["Sessions"],"summary":"Add Transcript By Room","description":"Add a transcript to a session using room name.","operationId":"add_transcript_by_room_api_sessions_by_room__room_name__transcripts_post","parameters":[{"name":"room_name","in":"path","required":true,"schema":{"type":"string","title":"Room Name"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptCreateByRoom"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranscriptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/livekit/token":{"post":{"tags":["LiveKit"],"summary":"Generate Token","description":"Generate a LiveKit access token for a user to join a room.","operationId":"generate_token_api_livekit_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/livekit/webhook":{"post":{"tags":["LiveKit"],"summary":"Livekit Webhook","description":"Handle LiveKit webhook events.","operationId":"livekit_webhook_api_livekit_webhook_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Event"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/telephony/numbers/search":{"get":{"tags":["Telephony"],"summary":"Search Available Numbers","description":"Search for available Twilio phone numbers.","operationId":"search_available_numbers_api_telephony_numbers_search_get","parameters":[{"name":"area_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Area code to search in","title":"Area Code"},"description":"Area code to search in"},{"name":"country","in":"query","required":false,"schema":{"type":"string","description":"Country code","default":"US","title":"Country"},"description":"Country code"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NumberSearchResult"},"title":"Response Search Available Numbers Api Telephony Numbers Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/telephony/numbers/buy":{"post":{"tags":["Telephony"],"summary":"Buy Number","description":"Purchase a Twilio phone number and assign it to an agent.","operationId":"buy_number_api_telephony_numbers_buy_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuyNumberRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuyNumberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/telephony/numbers/release":{"post":{"tags":["Telephony"],"summary":"Release Number","description":"Release a Twilio phone number from an agent.","operationId":"release_number_api_telephony_numbers_release_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReleaseNumberRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/telephony/numbers/assign":{"post":{"tags":["Telephony"],"summary":"Assign Existing Number","description":"Assign an already-owned Twilio number to an agent (no purchase).","operationId":"assign_existing_number_api_telephony_numbers_assign_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignNumberRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/telephony/lookup":{"get":{"tags":["Telephony"],"summary":"Lookup Agent By Phone","description":"Look up an agent by its assigned phone number. Used by the agent worker for SIP dispatch.","operationId":"lookup_agent_by_phone_api_telephony_lookup_get","parameters":[{"name":"phone_number","in":"query","required":true,"schema":{"type":"string","description":"The phone number to look up","title":"Phone Number"},"description":"The phone number to look up"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/resemble/voices/languages":{"get":{"tags":["Resemble"],"summary":"List Languages","description":"Return sorted list of distinct language names across all voices.","operationId":"list_languages_api_resemble_voices_languages_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/resemble/voices":{"get":{"tags":["Resemble"],"summary":"List Voices","description":"Return a paginated (and optionally language-filtered) list of voices.","operationId":"list_voices_api_resemble_voices_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":12,"title":"Page Size"}},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by language name","title":"Language"},"description":"Filter by language name"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/resemble/voices/{voice_id}":{"get":{"tags":["Resemble"],"summary":"Get Voice","description":"Return a single voice by ID from the cache.","operationId":"get_voice_api_resemble_voices__voice_id__get","parameters":[{"name":"voice_id","in":"path","required":true,"schema":{"type":"string","title":"Voice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calls/outbound":{"post":{"tags":["Calls"],"summary":"Create Outbound Call","description":"Initiate an outbound phone call via LiveKit SIP.\n\nCreates a voice session, a LiveKit room, and dials the phone number.","operationId":"create_outbound_call_api_calls_outbound_post","parameters":[{"name":"x-user-id","in":"header","required":true,"schema":{"type":"string","title":"X-User-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutboundCallRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutboundCallResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/calls/{call_id}/status":{"get":{"tags":["Calls"],"summary":"Get Call Status","description":"Get the current status of a call.","operationId":"get_call_status_api_calls__call_id__status_get","parameters":[{"name":"call_id","in":"path","required":true,"schema":{"type":"string","title":"Call Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CallStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/usage/events":{"post":{"tags":["Usage"],"summary":"Create Usage Event","description":"Log a usage event from the agent worker.","operationId":"create_usage_event_api_usage_events_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsageEventCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsageEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/costs/summary":{"get":{"tags":["Costs"],"summary":"Get Cost Summary","description":"Total cost, this month's cost, and cost broken down by provider.","operationId":"get_cost_summary_api_costs_summary_get","parameters":[{"name":"x-user-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CostSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/costs/timeline":{"get":{"tags":["Costs"],"summary":"Get Cost Timeline","description":"Cost over time, grouped by day/week/month.","operationId":"get_cost_timeline_api_costs_timeline_get","parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","pattern":"^(daily|weekly|monthly)$","default":"daily","title":"Period"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Date"}},{"name":"x-user-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TimelinePointResponse"},"title":"Response Get Cost Timeline Api Costs Timeline Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/costs/by-agent":{"get":{"tags":["Costs"],"summary":"Get Cost By Agent","description":"Cost aggregated per agent.","operationId":"get_cost_by_agent_api_costs_by_agent_get","parameters":[{"name":"x-user-id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AgentCostResponse"},"title":"Response Get Cost By Agent Api Costs By Agent Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AgentCostResponse":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"agent_name":{"type":"string","title":"Agent Name"},"total_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Cost"},"session_count":{"type":"integer","title":"Session Count"},"event_count":{"type":"integer","title":"Event Count"}},"type":"object","required":["agent_id","agent_name","total_cost","session_count","event_count"],"title":"AgentCostResponse"},"AgentCreate":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"type":{"$ref":"#/components/schemas/AgentType"},"config":{"additionalProperties":true,"type":"object","title":"Config","default":{}},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["name","type","user_id"],"title":"AgentCreate"},"AgentResponse":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"type":{"$ref":"#/components/schemas/AgentType"},"config":{"additionalProperties":true,"type":"object","title":"Config","default":{}},"id":{"type":"string","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"user_id":{"type":"string","title":"User Id"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"twilio_sid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Twilio Sid"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","type","id","is_active","user_id","created_at","updated_at"],"title":"AgentResponse"},"AgentType":{"type":"string","enum":["STT","LLM","TTS","PIPELINE"],"title":"AgentType"},"AgentUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Config"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"AgentUpdate"},"AssignNumberRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"phone_number":{"type":"string","title":"Phone Number"}},"type":"object","required":["agent_id","phone_number"],"title":"AssignNumberRequest"},"BuyNumberRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"phone_number":{"type":"string","title":"Phone Number"}},"type":"object","required":["agent_id","phone_number"],"title":"BuyNumberRequest"},"BuyNumberResponse":{"properties":{"phone_number":{"type":"string","title":"Phone Number"},"twilio_sid":{"type":"string","title":"Twilio Sid"},"agent_id":{"type":"string","title":"Agent Id"}},"type":"object","required":["phone_number","twilio_sid","agent_id"],"title":"BuyNumberResponse"},"CallDirection":{"type":"string","enum":["INBOUND","OUTBOUND"],"title":"CallDirection"},"CallStatus":{"type":"string","enum":["RINGING","ANSWERED","COMPLETED","FAILED","NO_ANSWER"],"title":"CallStatus"},"CallStatusResponse":{"properties":{"call_id":{"type":"string","title":"Call Id"},"status":{"$ref":"#/components/schemas/SessionStatus"},"call_status":{"anyOf":[{"$ref":"#/components/schemas/CallStatus"},{"type":"null"}]},"call_direction":{"anyOf":[{"$ref":"#/components/schemas/CallDirection"},{"type":"null"}]},"outbound_phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outbound Phone Number"},"room_name":{"type":"string","title":"Room Name"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration"}},"type":"object","required":["call_id","status","room_name"],"title":"CallStatusResponse"},"CostSummaryResponse":{"properties":{"total_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Cost"},"this_month_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"This Month Cost"},"by_provider":{"additionalProperties":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},"type":"object","title":"By Provider"}},"type":"object","required":["total_cost","this_month_cost","by_provider"],"title":"CostSummaryResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"NumberSearchResult":{"properties":{"phone_number":{"type":"string","title":"Phone Number"},"friendly_name":{"type":"string","title":"Friendly Name"},"locality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locality"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"}},"type":"object","required":["phone_number","friendly_name"],"title":"NumberSearchResult"},"OutboundCallRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id"},"phone_number":{"type":"string","title":"Phone Number"},"callback_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Callback Url"}},"type":"object","required":["agent_id","phone_number"],"title":"OutboundCallRequest"},"OutboundCallResponse":{"properties":{"call_id":{"type":"string","title":"Call Id"},"room_name":{"type":"string","title":"Room Name"},"status":{"$ref":"#/components/schemas/CallStatus"}},"type":"object","required":["call_id","room_name","status"],"title":"OutboundCallResponse"},"ReleaseNumberRequest":{"properties":{"agent_id":{"type":"string","title":"Agent Id"}},"type":"object","required":["agent_id"],"title":"ReleaseNumberRequest"},"SessionCostBreakdownResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"total_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Cost"},"events":{"items":{"$ref":"#/components/schemas/UsageEventResponse"},"type":"array","title":"Events"},"cost_by_type":{"additionalProperties":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},"type":"object","title":"Cost By Type"}},"type":"object","required":["session_id","total_cost","events","cost_by_type"],"title":"SessionCostBreakdownResponse"},"SessionStatus":{"type":"string","enum":["CREATED","ACTIVE","COMPLETED","FAILED"],"title":"SessionStatus"},"TimelinePointResponse":{"properties":{"date":{"type":"string","title":"Date"},"total_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Cost"},"by_provider":{"additionalProperties":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},"type":"object","title":"By Provider"}},"type":"object","required":["date","total_cost","by_provider"],"title":"TimelinePointResponse"},"TokenRequest":{"properties":{"room_name":{"type":"string","title":"Room Name"},"user_id":{"type":"string","title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"}},"type":"object","required":["room_name","user_id"],"title":"TokenRequest"},"TokenResponse":{"properties":{"token":{"type":"string","title":"Token"},"ws_url":{"type":"string","title":"Ws Url"},"room_name":{"type":"string","title":"Room Name"}},"type":"object","required":["token","ws_url","room_name"],"title":"TokenResponse"},"TranscriptCreate":{"properties":{"content":{"type":"string","title":"Content"},"speaker":{"$ref":"#/components/schemas/TranscriptSpeaker"},"session_id":{"type":"string","title":"Session Id"}},"type":"object","required":["content","speaker","session_id"],"title":"TranscriptCreate"},"TranscriptCreateByRoom":{"properties":{"content":{"type":"string","title":"Content"},"speaker":{"$ref":"#/components/schemas/TranscriptSpeaker"}},"type":"object","required":["content","speaker"],"title":"TranscriptCreateByRoom","description":"Transcript creation schema when using room name (session_id derived from room)."},"TranscriptResponse":{"properties":{"content":{"type":"string","title":"Content"},"speaker":{"$ref":"#/components/schemas/TranscriptSpeaker"},"id":{"type":"string","title":"Id"},"session_id":{"type":"string","title":"Session Id"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["content","speaker","id","session_id","timestamp"],"title":"TranscriptResponse"},"TranscriptSpeaker":{"type":"string","enum":["USER","AGENT"],"title":"TranscriptSpeaker"},"TransferRequest":{"properties":{"phone_number":{"type":"string","title":"Phone Number"},"type":{"$ref":"#/components/schemas/TransferType"}},"type":"object","required":["phone_number","type"],"title":"TransferRequest"},"TransferResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"transfer_type":{"$ref":"#/components/schemas/TransferType"},"transferred_to":{"type":"string","title":"Transferred To"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["session_id","transfer_type","transferred_to","status","message"],"title":"TransferResponse"},"TransferType":{"type":"string","enum":["WARM","COLD"],"title":"TransferType"},"UsageEventCreate":{"properties":{"session_id":{"type":"string","title":"Session Id"},"user_id":{"type":"string","title":"User Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"provider":{"type":"string","title":"Provider"},"event_type":{"$ref":"#/components/schemas/UsageEventType"},"quantity":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Quantity"},"unit_cost":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Unit Cost"},"total_cost":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Total Cost"}},"type":"object","required":["session_id","user_id","provider","event_type","quantity","unit_cost","total_cost"],"title":"UsageEventCreate"},"UsageEventResponse":{"properties":{"id":{"type":"string","title":"Id"},"session_id":{"type":"string","title":"Session Id"},"user_id":{"type":"string","title":"User Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"provider":{"type":"string","title":"Provider"},"event_type":{"$ref":"#/components/schemas/UsageEventType"},"quantity":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Quantity"},"unit_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Unit Cost"},"total_cost":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Cost"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","session_id","user_id","provider","event_type","quantity","unit_cost","total_cost","created_at"],"title":"UsageEventResponse"},"UsageEventType":{"type":"string","enum":["stt_minutes","llm_tokens","tts_characters"],"title":"UsageEventType"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VoiceSessionCreate":{"properties":{"room_name":{"type":"string","title":"Room Name"},"session_data":{"additionalProperties":true,"type":"object","title":"Session Data","default":{}},"user_id":{"type":"string","title":"User Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"}},"type":"object","required":["room_name","user_id"],"title":"VoiceSessionCreate"},"VoiceSessionResponse":{"properties":{"room_name":{"type":"string","title":"Room Name"},"session_data":{"additionalProperties":true,"type":"object","title":"Session Data","default":{}},"id":{"type":"string","title":"Id"},"status":{"$ref":"#/components/schemas/SessionStatus"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration"},"user_id":{"type":"string","title":"User Id"},"agent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Id"},"agent_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agent Name"},"call_direction":{"anyOf":[{"$ref":"#/components/schemas/CallDirection"},{"type":"null"}]},"outbound_phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Outbound Phone Number"},"call_status":{"anyOf":[{"$ref":"#/components/schemas/CallStatus"},{"type":"null"}]},"analysis":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Analysis"},"transferred_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transferred To"},"transfer_type":{"anyOf":[{"$ref":"#/components/schemas/TransferType"},{"type":"null"}]},"transfer_timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Transfer Timestamp"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["room_name","id","status","started_at","ended_at","duration","user_id","agent_id","created_at","updated_at"],"title":"VoiceSessionResponse"},"VoiceSessionUpdate":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/SessionStatus"},{"type":"null"}]},"ended_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ended At"},"duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","title":"VoiceSessionUpdate"}}}}